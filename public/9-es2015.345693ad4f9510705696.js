(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{pax7:function(t,n,e){"use strict";e.r(n),e.d(n,"BoardModule",(function(){return P}));var o=e("ofXK"),a=e("YUcS"),c=e("tyNb"),i=e("cCzN"),l=e("XNiG"),d=e("1G5W"),b=e("5m3b"),s=e("A09s"),r=e("niqc"),u=e("pA66"),m=e("LcAk"),f=e("fXoL"),h=e("IRfi"),g=e("A2Vd"),p=e("Xlwt"),R=e("3Pt+");function M(t,n){if(1&t){const t=f.Tb();f.Sb(0,"button",9),f.ac("click",(function(){return f.tc(t),f.ec(2).allowEdition()})),f.Bc(1,"Editar Anuncio"),f.Rb()}}function S(t,n){if(1&t){const t=f.Tb();f.Sb(0,"button",10),f.ac("click",(function(){return f.tc(t),f.ec(2).deleteAnnouncement()})),f.Bc(1,"Eliminar Anuncio"),f.Rb()}}function y(t,n){if(1&t){const t=f.Tb();f.Sb(0,"button",10),f.ac("click",(function(){return f.tc(t),f.ec(2).editAnnouncement()})),f.Bc(1,"Confirmar"),f.Rb()}}function A(t,n){if(1&t){const t=f.Tb();f.Sb(0,"div"),f.Sb(1,"div",1),f.Sb(2,"div"),f.Sb(3,"mat-form-field"),f.Sb(4,"input",2),f.ac("ngModelChange",(function(n){return f.tc(t),f.ec().local_data.title=n})),f.Rb(),f.Rb(),f.Sb(5,"mat-form-field"),f.Sb(6,"textarea",3),f.ac("ngModelChange",(function(n){return f.tc(t),f.ec().local_data.body=n})),f.Rb(),f.Rb(),f.Sb(7,"mat-form-field"),f.Sb(8,"input",4),f.ac("ngModelChange",(function(n){return f.tc(t),f.ec().local_data.timestamp=n})),f.Rb(),f.Rb(),f.Rb(),f.Rb(),f.Sb(9,"div",5),f.Sb(10,"button",6),f.ac("click",(function(){return f.tc(t),f.ec().onNoClick()})),f.Bc(11,"Cerrar"),f.Rb(),f.zc(12,M,2,0,"button",7),f.zc(13,S,2,0,"button",8),f.zc(14,y,2,0,"button",8),f.Rb(),f.Rb()}if(2&t){const t=f.ec();f.Ab(4),f.lc("ngModel",t.local_data.title)("readonly",t.isReadOnly),f.Ab(2),f.lc("ngModel",t.local_data.body)("readonly",t.isReadOnly),f.Ab(2),f.lc("ngModel",t.local_data.timestamp),f.Ab(4),f.lc("ngIf",t.isReadOnly),f.Ab(1),f.lc("ngIf",t.isReadOnly),f.Ab(1),f.lc("ngIf",!1===t.isReadOnly)}}function C(t,n){if(1&t){const t=f.Tb();f.Sb(0,"div"),f.Sb(1,"div",1),f.Sb(2,"div"),f.Sb(3,"mat-form-field"),f.Sb(4,"input",11),f.ac("ngModelChange",(function(n){return f.tc(t),f.ec().local_data.title=n})),f.Rb(),f.Rb(),f.Sb(5,"mat-form-field"),f.Sb(6,"textarea",12),f.ac("ngModelChange",(function(n){return f.tc(t),f.ec().local_data.body=n})),f.Rb(),f.Rb(),f.Rb(),f.Rb(),f.Sb(7,"div",5),f.Sb(8,"button",6),f.ac("click",(function(){return f.tc(t),f.ec().onNoClick()})),f.Bc(9,"Cerrar"),f.Rb(),f.Sb(10,"button",9),f.ac("click",(function(){return f.tc(t),f.ec().createAnnouncement()})),f.Bc(11,"Confirmar Anuncio"),f.Rb(),f.Rb(),f.Rb()}if(2&t){const t=f.ec();f.Ab(4),f.lc("ngModel",t.local_data.title),f.Ab(2),f.lc("ngModel",t.local_data.body)}}let v=(()=>{class t{constructor(t,n){this.dialogRef=t,this.data=n,this.local_data=Object.assign({},n),this.action=this.local_data.action,"view"===this.action&&(this.isReadOnly=!0,this.local_data.timestamp=this.local_data.timestamp.toDate())}onNoClick(){this.dialogRef.close({event:"close"})}allowEdition(){this.isReadOnly=!1}editAnnouncement(){this.dialogRef.close({event:"edit",data:this.local_data})}deleteAnnouncement(){this.dialogRef.close({event:"delete"})}createAnnouncement(){this.dialogRef.close({event:"create",data:this.local_data})}}return t.\u0275fac=function(n){return new(n||t)(f.Mb(m.f),f.Mb(m.a))},t.\u0275cmp=f.Gb({type:t,selectors:[["app-board-dialog"]],decls:2,vars:2,consts:[[4,"ngIf"],["mat-dialog-content",""],["type","text","placeholder","T\xedtulo","matInput","",3,"ngModel","readonly","ngModelChange"],["cols","1","rows","10","placeholder","Cuerpo del Anuncio","matInput","",3,"ngModel","readonly","ngModelChange"],["type","text","placeholder","fecha de creaci\xf3n","matInput","","readonly","",3,"ngModel","ngModelChange"],["mat-dialog-actions",""],["mat-button","",3,"click"],["mat-button","","mat-flat-button","","color","accent",3,"click",4,"ngIf"],["mat-button","","mat-flat-button","","color","warn",3,"click",4,"ngIf"],["mat-button","","mat-flat-button","","color","accent",3,"click"],["mat-button","","mat-flat-button","","color","warn",3,"click"],["type","text","placeholder","T\xedtulo","matInput","",3,"ngModel","ngModelChange"],["cols","1","rows","10","placeholder","Cuerpo del Anuncio","matInput","",3,"ngModel","ngModelChange"]],template:function(t,n){1&t&&(f.zc(0,A,15,8,"div",0),f.zc(1,C,12,2,"div",0)),2&t&&(f.lc("ngIf","view"===n.action),f.Ab(1),f.lc("ngIf","create"===n.action))},directives:[o.m,m.d,h.a,g.b,R.b,R.j,R.m,m.c,p.b],encapsulation:2}),t})();var w=e("0DX0"),I=e("MSSf"),x=e("XiUz");function O(t,n){if(1&t){const t=f.Tb();f.Sb(0,"div",12),f.Sb(1,"div",13),f.Nb(2,"img",14),f.Rb(),f.Sb(3,"div",15),f.Sb(4,"h4",16),f.Bc(5),f.Sb(6,"small",17),f.Bc(7),f.fc(8,"date"),f.Rb(),f.Rb(),f.Sb(9,"p",17),f.Bc(10),f.fc(11,"slice"),f.Rb(),f.Sb(12,"button",18),f.ac("click",(function(){f.tc(t);const e=n.$implicit,o=n.index;return f.ec().viewAnnouncementBody(e,o)})),f.Bc(13,"ver anuncio completo"),f.Rb(),f.Rb(),f.Rb()}if(2&t){const t=n.$implicit;f.Ab(5),f.Dc("",t.title," "),f.Ab(2),f.Cc(f.gc(8,3,t.timestamp.toDate())),f.Ab(3),f.Cc(t.body.length>50?f.ic(11,5,t.body,0,260)+"..":t.body)}}const _=function(){return{standalone:!0}},k=[{path:"",component:(()=>{class t{constructor(t,n,e,o,a,c){this.dialog=t,this.fetchData=n,this.setData=e,this.deleteData=o,this.holdData=a,this._snackBar=c,this.destroy$=new l.a,this.announcementList=[],this.listOfBacgroundColors=["#ADD8E6","#F5B6C1","#DDBDF1","#90EE90"],this.horizontalPosition="center",this.verticalPosition="bottom"}ngOnInit(){this.userId=this.holdData.userId,this.buildingInfo=this.holdData.buildingInfo,this.getAnnouncements()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}getAnnouncements(){this.announcementList=[],this.fetchData.getBoardAnnouncements(this.holdData.userInfo.buildingId).pipe(Object(d.a)(this.destroy$)).subscribe(t=>{this.announcementList=t,this.colorBackgroundChange()})}colorBackgroundChange(){this.announcementList.forEach(t=>{const n=Math.floor(Math.random()*this.listOfBacgroundColors.length);t.colorHeader=this.listOfBacgroundColors[n]})}createAnnouncement(){const t={title:this.title,body:this.body,timestamp:this.holdData.convertJSDateIntoFirestoreTimestamp()};this.setData.createAnnouncement(this.holdData.userInfo.buildingId,t).then(()=>{this._snackBar.open("Anuncio creado exitosamente","Cerrar",{duration:2e3,horizontalPosition:this.horizontalPosition,verticalPosition:this.verticalPosition}),this.title="",this.body="",this.tabGroup.selectedIndex=0})}viewAnnouncementBody(t,n){t.action="view",this.dialog.open(v,{data:t}).afterClosed().subscribe(n=>{const e=n.event;"edit"===e?this.updateAnnouncement(t,{announcementId:t.announcementId,title:n.data.title,body:n.data.body,timestamp:n.data.timestamp}):"delete"===e&&this.deleteAnnouncement(t)})}updateAnnouncement(t,n){this.setData.updateAnnouncement(this.holdData.userInfo.buildingId,t.announcementId,n)}deleteAnnouncement(t){this.deleteData.deleteAnnouncement(this.holdData.userInfo.buildingId,t.announcementId)}}return t.\u0275fac=function(n){return new(n||t)(f.Mb(m.b),f.Mb(b.a),f.Mb(s.a),f.Mb(r.a),f.Mb(u.a),f.Mb(w.a))},t.\u0275cmp=f.Gb({type:t,selectors:[["app-board"]],viewQuery:function(t,n){var e;1&t&&f.Ic(i.b,!0),2&t&&f.qc(e=f.bc())&&(n.tabGroup=e.first)},decls:25,vars:8,consts:[[1,"p-20","bg-info","position-relative"],[1,"card-title","text-white","m-0"],[1,"card-subtitle","text-white","m-0","op-5"],["label","Publicados"],["class","d-flex no-blcok",4,"ngFor","ngForOf"],["label","Crear Anuncio"],[1,"basic-form"],["fxLayout","row wrap"],["fxFlex.gt-sm","100","fxFlex","100"],["matInput","","placeholder","T\xedtulo",3,"ngModel","ngModelOptions","ngModelChange"],["cols","1","rows","10","matInput","","placeholder","Cuerpo del anuncio",3,"ngModel","ngModelOptions","ngModelChange"],["mat-raised-button","","color","primary",3,"click"],[1,"d-flex","no-blcok"],[1,"m-r-20"],["width","50","src","assets/images/newspaper.png","alt","Image",1,"img-circle"],[1,"p-b-20","b-b","m-b-30"],[1,"m-0"],[1,"text-muted"],["mat-button","",3,"click"]],template:function(t,n){1&t&&(f.Sb(0,"mat-card"),f.Sb(1,"div",0),f.Sb(2,"h4",1),f.Bc(3,"Anuncios"),f.Rb(),f.Sb(4,"h6",2),f.Bc(5),f.Rb(),f.Rb(),f.Sb(6,"mat-tab-group"),f.Sb(7,"mat-tab",3),f.Sb(8,"mat-card-content"),f.zc(9,O,14,9,"div",4),f.Rb(),f.Rb(),f.Sb(10,"mat-tab",5),f.Sb(11,"mat-card-content"),f.Sb(12,"mat-card-title"),f.Bc(13,"Crear Anuncio"),f.Rb(),f.Sb(14,"form",6),f.Sb(15,"div",7),f.Sb(16,"div",8),f.Sb(17,"mat-form-field"),f.Sb(18,"input",9),f.ac("ngModelChange",(function(t){return n.title=t})),f.Rb(),f.Rb(),f.Rb(),f.Sb(19,"div",8),f.Sb(20,"mat-form-field"),f.Sb(21,"textarea",10),f.ac("ngModelChange",(function(t){return n.body=t})),f.Rb(),f.Rb(),f.Rb(),f.Sb(22,"div",8),f.Sb(23,"button",11),f.ac("click",(function(){return n.createAnnouncement()})),f.Bc(24,"Publicar"),f.Rb(),f.Rb(),f.Rb(),f.Rb(),f.Rb(),f.Rb(),f.Rb(),f.Rb()),2&t&&(f.Ab(5),f.Dc("Estos son los anuncios publicados para la comunidad ",n.buildingInfo.name,""),f.Ab(4),f.lc("ngForOf",n.announcementList),f.Ab(9),f.lc("ngModel",n.title)("ngModelOptions",f.nc(6,_)),f.Ab(3),f.lc("ngModel",n.body)("ngModelOptions",f.nc(7,_)))},directives:[I.a,i.b,i.a,I.c,o.l,I.h,R.q,R.k,R.l,x.c,x.a,h.a,g.b,R.b,R.j,R.m,p.b],pipes:[o.f,o.u],styles:[".first-button[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:30px}.main-content[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.card[_ngcontent-%COMP%]{max-width:30%;min-width:30%;max-height:40%}.header[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.content[_ngcontent-%COMP%]{border-bottom:.2px solid #c9c8c7;margin-bottom:0}.buttons[_ngcontent-%COMP%], .content[_ngcontent-%COMP%]{display:flex;justify-content:center}.buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-bottom:10px}.content[_ngcontent-%COMP%], .truncate[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.content[_ngcontent-%COMP%]{width:100%}"]}),t})()}];let B=(()=>{class t{}return t.\u0275mod=f.Kb({type:t}),t.\u0275inj=f.Jb({factory:function(n){return new(n||t)},imports:[[c.i.forChild(k)],c.i]}),t})();var D=e("onrN");let P=(()=>{class t{}return t.\u0275mod=f.Kb({type:t}),t.\u0275inj=f.Jb({factory:function(n){return new(n||t)},imports:[[o.c,B,D.a,a.a,R.f]]}),t})()}}]);