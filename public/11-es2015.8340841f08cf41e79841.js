(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{KlkT:function(t,e,n){"use strict";n.r(e),n.d(e,"DirectoryModule",(function(){return w}));var i=n("ofXK"),o=n("tyNb"),c=n("5m3b"),a=n("pA66"),r=n("A09s"),s=n("LcAk"),b=n("fXoL"),l=n("IRfi"),d=n("2+6u"),h=n("Xlwt"),u=n("A2Vd"),m=n("3Pt+"),p=n("j14s");function g(t,e){if(1&t){const t=b.Tb();b.Sb(0,"div"),b.Sb(1,"mat-form-field",1),b.Sb(2,"mat-label"),b.Bc(3,"Nombre"),b.Rb(),b.Sb(4,"input",10),b.ac("ngModelChange",(function(e){return b.tc(t),b.ec().nameEmerg=e})),b.Rb(),b.Rb(),b.Nb(5,"br"),b.Sb(6,"mat-form-field",1),b.Sb(7,"mat-label"),b.Bc(8,"Telefono"),b.Rb(),b.Sb(9,"input",11),b.ac("ngModelChange",(function(e){return b.tc(t),b.ec().phoneEmerg=e})),b.Rb(),b.Rb(),b.Rb()}if(2&t){const t=b.ec();b.Ab(4),b.lc("ngModel",t.nameEmerg),b.Ab(5),b.lc("ngModel",t.phoneEmerg)}}function f(t,e){if(1&t){const t=b.Tb();b.Sb(0,"div"),b.Sb(1,"mat-form-field",1),b.Sb(2,"mat-label"),b.Bc(3,"Nombre"),b.Rb(),b.Sb(4,"input",10),b.ac("ngModelChange",(function(e){return b.tc(t),b.ec().nameOther=e})),b.Rb(),b.Rb(),b.Nb(5,"br"),b.Sb(6,"mat-form-field",1),b.Sb(7,"mat-label"),b.Bc(8,"Descripci\xf3n"),b.Rb(),b.Sb(9,"input",10),b.ac("ngModelChange",(function(e){return b.tc(t),b.ec().description=e})),b.Rb(),b.Rb(),b.Nb(10,"br"),b.Sb(11,"mat-form-field",1),b.Sb(12,"mat-label"),b.Bc(13,"Telefono"),b.Rb(),b.Sb(14,"input",11),b.ac("ngModelChange",(function(e){return b.tc(t),b.ec().phoneOther=e})),b.Rb(),b.Rb(),b.Rb()}if(2&t){const t=b.ec();b.Ab(4),b.lc("ngModel",t.nameOther),b.Ab(5),b.lc("ngModel",t.description),b.Ab(5),b.lc("ngModel",t.phoneOther)}}function R(t,e){1&t&&(b.Sb(0,"p",12),b.Bc(1,"Te falta informaci\xf3n"),b.Rb())}function S(t,e){if(1&t){const t=b.Tb();b.Sb(0,"button",13),b.ac("click",(function(){return b.tc(t),b.ec().addEmergencyContact()})),b.Bc(1,"Confirmar"),b.Rb()}}function v(t,e){if(1&t){const t=b.Tb();b.Sb(0,"button",13),b.ac("click",(function(){return b.tc(t),b.ec().addOtherContact()})),b.Bc(1,"Confirmar"),b.Rb()}}let y=(()=>{class t{constructor(t,e){this.dialogRef=t,this.data=e,this.showError=!1}onNoClick(){this.dialogRef.close({event:"close"})}addEmergencyContact(){this.nameEmerg&&this.phoneEmerg?this.dialogRef.close({event:this.typeOfContact,data:{nameEmerg:this.nameEmerg,phoneEmerg:this.phoneEmerg}}):this.showError=!0}addOtherContact(){this.nameOther&&this.phoneOther&&this.description?this.dialogRef.close({event:this.typeOfContact,data:{nameOther:this.nameOther,phoneOther:this.phoneOther,description:this.description}}):this.showError=!0}changeType(t){"emergency"===t.value?(this.nameOther=null,this.phoneOther=null,this.description=null,this.showError=!1):"others"===t.value&&(this.nameEmerg=null,this.phoneEmerg=null,this.showError=!1)}}return t.\u0275fac=function(e){return new(e||t)(b.Mb(s.f),b.Mb(s.a))},t.\u0275cmp=b.Gb({type:t,selectors:[["app-contact-dialog"]],decls:19,vars:6,consts:[["mat-dialog-content",""],["appearance","fill"],[3,"ngModel","ngModelChange","selectionChange"],["value","emergency"],["value","others"],[4,"ngIf"],["style","color: red;",4,"ngIf"],["mat-dialog-actions",""],["mat-button","",3,"click"],["mat-button","","mat-flat-button","","color","accent",3,"click",4,"ngIf"],["matInput","","type","text",3,"ngModel","ngModelChange"],["matInput","","type","number",3,"ngModel","ngModelChange"],[2,"color","red"],["mat-button","","mat-flat-button","","color","accent",3,"click"]],template:function(t,e){1&t&&(b.Sb(0,"div",0),b.Sb(1,"mat-form-field",1),b.Sb(2,"mat-label"),b.Bc(3,"Tipo de Contacto"),b.Rb(),b.Sb(4,"mat-select",2),b.ac("ngModelChange",(function(t){return e.typeOfContact=t}))("selectionChange",(function(t){return e.changeType(t)})),b.Sb(5,"mat-option",3),b.Bc(6,"Contacto de emergencia"),b.Rb(),b.Sb(7,"mat-option",4),b.Bc(8,"Otro"),b.Rb(),b.Rb(),b.Rb(),b.zc(9,g,10,2,"div",5),b.zc(10,f,15,3,"div",5),b.Nb(11,"br"),b.zc(12,R,2,0,"p",6),b.Sb(13,"footer"),b.Sb(14,"div",7),b.Sb(15,"button",8),b.ac("click",(function(){return e.onNoClick()})),b.Bc(16,"Cerrar"),b.Rb(),b.zc(17,S,2,0,"button",9),b.zc(18,v,2,0,"button",9),b.Rb(),b.Rb(),b.Rb()),2&t&&(b.Ab(4),b.lc("ngModel",e.typeOfContact),b.Ab(5),b.lc("ngIf","emergency"===e.typeOfContact),b.Ab(1),b.lc("ngIf","others"===e.typeOfContact),b.Ab(2),b.lc("ngIf",e.showError),b.Ab(5),b.lc("ngIf","emergency"===e.typeOfContact),b.Ab(1),b.lc("ngIf","others"===e.typeOfContact))},directives:[s.d,l.a,l.e,d.a,m.j,m.m,p.o,i.m,s.c,h.b,u.b,m.b,m.n],encapsulation:2}),t})();var C=n("MSSf"),O=n("TY1r");function I(t,e){if(1&t&&(b.Sb(0,"a"),b.Sb(1,"div",6),b.Nb(2,"img",7),b.Nb(3,"span",12),b.Rb(),b.Sb(4,"div",9),b.Sb(5,"h5"),b.Bc(6),b.Rb(),b.Sb(7,"span",10),b.Bc(8),b.Rb(),b.Rb(),b.Rb()),2&t){const t=e.$implicit;b.Ab(6),b.Cc(t.name),b.Ab(2),b.Dc(" Tel\xe9fono: ",t.phone,"")}}function A(t,e){if(1&t){const t=b.Tb();b.Sb(0,"a"),b.Sb(1,"div",6),b.Nb(2,"img",7),b.Nb(3,"span",12),b.Rb(),b.Sb(4,"div",9),b.Sb(5,"h5"),b.Bc(6),b.Sb(7,"span",10),b.Bc(8),b.Rb(),b.Rb(),b.Sb(9,"span",10),b.Bc(10),b.Rb(),b.Rb(),b.Sb(11,"div",13),b.Sb(12,"button",14),b.ac("click",(function(){b.tc(t);const n=e.$implicit;return b.ec().chat(n)})),b.Sb(13,"mat-icon"),b.Bc(14,"chat"),b.Rb(),b.Rb(),b.Rb(),b.Rb()}if(2&t){const t=e.$implicit;b.Ab(6),b.Ec("",t.name," ",t.lastname," "),b.Ab(2),b.Cc(t.email),b.Ab(2),b.Dc(" Tel\xe9fono: ",t.phone,"")}}function B(t,e){if(1&t&&(b.Sb(0,"a"),b.Sb(1,"div",6),b.Nb(2,"img",7),b.Nb(3,"span",12),b.Rb(),b.Sb(4,"div",9),b.Sb(5,"h5"),b.Bc(6),b.Sb(7,"span",10),b.Bc(8),b.Rb(),b.Rb(),b.Sb(9,"span",10),b.Bc(10),b.Rb(),b.Rb(),b.Rb()),2&t){const t=e.$implicit;b.Ab(6),b.Cc(t.name),b.Ab(2),b.Cc(t.description),b.Ab(2),b.Dc(" Tel\xe9fono: ",t.phone,"")}}const M=[{path:"",component:(()=>{class t{constructor(t,e,n,i,o){this.fecthDataService=t,this.setData=e,this.holdData=n,this.dialog=i,this.router=o,this.residents=[],this.emergency=[],this.others=[]}ngOnInit(){this.user=this.holdData.userInfo,this.buildingInfo=this.holdData.buildingInfo,this.getInfoDirectoryEmergency(),this.getInfoDirectoryOthers(),this.getInfoDirectoryResidents()}getInfoDirectoryResidents(){this.fecthDataService.getDirectory(this.user.buildingId,"residents").subscribe(t=>{t.map(t=>{const e=t.payload.doc.data();this.residents.push(e)})})}getInfoDirectoryEmergency(){this.fecthDataService.getDirectory(this.user.buildingId,"emergency").subscribe(t=>{t.map(t=>{const e=t.payload.doc.data();this.emergency.push(e)})})}getInfoDirectoryOthers(){this.fecthDataService.getDirectory(this.user.buildingId,"others").subscribe(t=>{t.map(t=>{const e=t.payload.doc.data();this.others.push(e)})})}chat(t){this.fecthDataService.getPrivateChatKey(this.user.userId,t.userId).subscribe(e=>{e.data()?this.router.navigate(["/canales-comunicacion"]):this.setData.createPrivateChat({userId:this.user.userId,name:this.user.name,lastname:this.user.lastname},{userId:t.userId,name:t.name,lastname:t.lastname}).then(()=>{this.router.navigate(["/canales-comunicacion"])})})}addContact(){this.dialog.open(y).afterClosed().subscribe(t=>{"close"===t.event||("emergency"===t.event?this.addContactFirebase({type:t.event,info:{name:t.data.nameEmerg,phone:t.data.phoneEmerg},buildingId:this.user.buildingId}):"others"===t.event&&this.addContactFirebase({type:t.event,info:{name:t.data.nameOther,phone:t.data.phoneOther,description:t.data.description},buildingId:this.user.buildingId}))})}addContactFirebase(t){this.setData.addContact(t).then(()=>{console.log("guardado")})}}return t.\u0275fac=function(e){return new(e||t)(b.Mb(c.a),b.Mb(r.a),b.Mb(a.a),b.Mb(s.b),b.Mb(o.f))},t.\u0275cmp=b.Gb({type:t,selectors:[["app-directory"]],decls:33,vars:7,consts:[[1,"p-20","bg-info","position-relative"],[1,"card-title","text-white","m-0"],[1,"card-subtitle","text-white","m-0","op-5"],["mat-raised-button","","color","warn",3,"click"],[1,"message-box","contact-box","p-20"],[1,"message-widget","contact-widget"],[1,"user-img"],["src","../assets/images/users/profile.png","alt","user",1,"img-circle"],[1,"profile-status","online","pull-right"],[1,"mail-contnet"],[1,"mail-desc"],[4,"ngFor","ngForOf"],[1,"profile-status","busy","pull-right"],[1,"example-button-container"],["mat-mini-fab","","aria-label","Example icon button with a home icon",3,"click"]],template:function(t,e){1&t&&(b.Sb(0,"mat-card"),b.Sb(1,"div",0),b.Sb(2,"div"),b.Sb(3,"h4",1),b.Bc(4,"Directorio"),b.Rb(),b.Sb(5,"h6",2),b.Bc(6),b.Rb(),b.Rb(),b.Sb(7,"button",3),b.ac("click",(function(){return e.addContact()})),b.Bc(8,"A\xf1adir contacto"),b.Rb(),b.Rb(),b.Sb(9,"div",4),b.Sb(10,"div",5),b.Bc(11," Administrador "),b.Sb(12,"a"),b.Sb(13,"div",6),b.Nb(14,"img",7),b.Nb(15,"span",8),b.Rb(),b.Sb(16,"div",9),b.Sb(17,"h5"),b.Bc(18),b.Rb(),b.Sb(19,"span",10),b.Bc(20),b.Rb(),b.Rb(),b.Rb(),b.Rb(),b.Rb(),b.Sb(21,"div",4),b.Sb(22,"div",5),b.Bc(23," Emergencias "),b.zc(24,I,9,2,"a",11),b.Rb(),b.Rb(),b.Sb(25,"div",4),b.Sb(26,"div",5),b.Bc(27," Residentes "),b.zc(28,A,15,4,"a",11),b.Rb(),b.Rb(),b.Sb(29,"div",4),b.Sb(30,"div",5),b.Bc(31," Otros Contactos "),b.zc(32,B,11,3,"a",11),b.Rb(),b.Rb(),b.Rb()),2&t&&(b.Ab(6),b.Dc("Estos son los contactos de los propietarios de ",e.buildingInfo.name,""),b.Ab(12),b.Ec("",e.user.name," ",e.user.lastname,""),b.Ab(2),b.Dc("Tel\xe9fono: ",e.user.phone," "),b.Ab(4),b.lc("ngForOf",e.emergency),b.Ab(4),b.lc("ngForOf",e.residents),b.Ab(4),b.lc("ngForOf",e.others))},directives:[C.a,h.b,i.l,O.a],styles:[".position-relative[_ngcontent-%COMP%]{display:flex;position:relative;justify-content:space-between}.add-contact[_ngcontent-%COMP%]{position:absolute;right:17px;top:57px}.mail-desc[_ngcontent-%COMP%]{margin-left:5px}"]}),t})()}];let E=(()=>{class t{}return t.\u0275mod=b.Kb({type:t}),t.\u0275inj=b.Jb({factory:function(e){return new(e||t)},imports:[[o.i.forChild(M)],o.i]}),t})();var D=n("onrN");let w=(()=>{class t{}return t.\u0275mod=b.Kb({type:t}),t.\u0275inj=b.Jb({factory:function(e){return new(e||t)},imports:[[i.c,E,D.a]]}),t})()}}]);