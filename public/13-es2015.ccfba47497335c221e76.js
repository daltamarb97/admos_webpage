(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{cRhG:function(t,n,a){"use strict";a.r(n),a.d(n,"ProfileModule",(function(){return O}));var o=a("ofXK"),e=a("YUcS"),i=a("tyNb"),c=a("LcAk"),r=a("fXoL"),s=a("0DX0"),l=a("IRfi"),d=a("A2Vd"),b=a("Xlwt"),m=a("3Pt+");function u(t,n){if(1&t){const t=r.Tb();r.Sb(0,"div",2),r.Sb(1,"mat-form-field"),r.Sb(2,"input",3),r.ac("ngModelChange",(function(n){return r.tc(t),r.ec().local_data.email=n})),r.Rb(),r.Rb(),r.Sb(3,"mat-form-field"),r.Sb(4,"input",4),r.ac("ngModelChange",(function(n){return r.tc(t),r.ec().local_data.password=n})),r.Rb(),r.Rb(),r.Sb(5,"div",5),r.Sb(6,"button",6),r.ac("click",(function(){return r.tc(t),r.ec().onNoClick()})),r.Bc(7,"Cancelar"),r.Rb(),r.Sb(8,"button",7),r.ac("click",(function(){return r.tc(t),r.ec().createDoormanAccount()})),r.Bc(9,"Crear Cuenta de Porter\xeda"),r.Rb(),r.Rb(),r.Rb()}if(2&t){const t=r.ec();r.Ab(2),r.lc("ngModel",t.local_data.email),r.Ab(2),r.lc("ngModel",t.local_data.password)}}function h(t,n){if(1&t){const t=r.Tb();r.Bc(0," Copia y pega este link en tu navegador de internet para pagar la mensualidad de Admos. Cada mes se actualiza el link. "),r.Sb(1,"section",8),r.Sb(2,"mat-form-field"),r.Sb(3,"mat-label"),r.Bc(4,"Link de Pago"),r.Rb(),r.Sb(5,"input",9),r.ac("ngModelChange",(function(n){return r.tc(t),r.ec().local_data.paymentLink=n})),r.Rb(),r.Rb(),r.Sb(6,"button",10),r.ac("click",(function(){return r.tc(t),r.ec().copyMessage()})),r.Bc(7,"Copiar"),r.Rb(),r.Rb(),r.Sb(8,"div",5),r.Sb(9,"button",6),r.ac("click",(function(){return r.tc(t),r.ec().onNoClick()})),r.Bc(10,"Salir"),r.Rb(),r.Rb()}if(2&t){const t=r.ec();r.Ab(5),r.lc("ngModel",t.local_data.paymentLink)}}let p=(()=>{class t{constructor(t,n,a){this.dialogRef=t,this.data=n,this._snackBar=a,this.horizontalPosition="center",this.verticalPosition="bottom",this.local_data=Object.assign({},n),this.action=this.local_data.action}onNoClick(){this.action="cancel",this.dialogRef.close({event:this.action})}createDoormanAccount(){this.local_data.email&&this.local_data.password?this.dialogRef.close({data:this.local_data,event:this.action}):this._snackBar.open("Te falta informaci\xf3n para crear la cuenta","Cerrar",{duration:1500,horizontalPosition:this.horizontalPosition,verticalPosition:this.verticalPosition})}copyMessage(){const t=document.createElement("textarea");t.style.position="fixed",t.style.left="0",t.style.top="0",t.style.opacity="0",t.value=this.local_data.paymentLink,document.body.appendChild(t),t.focus(),t.select(),document.execCommand("copy"),document.body.removeChild(t)}}return t.\u0275fac=function(n){return new(n||t)(r.Mb(c.f),r.Mb(c.a),r.Mb(s.a))},t.\u0275cmp=r.Gb({type:t,selectors:[["app-profile-dialog"]],decls:3,vars:2,consts:[["mat-dialog-content","",4,"ngIf","ngIfElse"],["elseTemplate",""],["mat-dialog-content",""],["type","email","placeholder","email para la cuenta porter\xeda","matInput","",3,"ngModel","ngModelChange"],["type","text","placeholder","contrase\xf1a para la cuenta de porter\xeda","matInput","",3,"ngModel","ngModelChange"],["mat-dialog-actions",""],["mat-button","",3,"click"],["mat-button","","mat-flat-button","","color","warn",3,"click"],[1,"payment-input"],["matInput","","readonly","",3,"ngModel","ngModelChange"],["mat-stroked-button","","color","primary",3,"click"]],template:function(t,n){if(1&t&&(r.zc(0,u,10,2,"div",0),r.zc(1,h,11,1,"ng-template",null,1,r.Ac)),2&t){const t=r.rc(2);r.lc("ngIf","doorman"==n.action)("ngIfElse",t)}},directives:[o.m,c.d,l.a,d.b,m.b,m.j,m.m,c.c,b.b,l.e],styles:[".payment-input[_ngcontent-%COMP%]{display:flex;flex-direction:row;margin-bottom:20px;margin-top:15px}.payment-input[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{margin-right:10px}.payment-input[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{max-height:50px}"]}),t})();var g=a("A09s"),f=a("pA66"),y=a("5m3b"),C=a("7dP1"),P=a("niqc"),M=a("1G5W"),R=a("XNiG"),S=a("MSSf"),k=a("dCan"),w=a("kEI4"),_=a("TY1r");function D(t,n){if(1&t){const t=r.Tb();r.Sb(0,"mat-list",11),r.Sb(1,"mat-list-item",12),r.Bc(2),r.Rb(),r.Sb(3,"mat-icon",13),r.ac("click",(function(){r.tc(t);const a=n.$implicit;return r.ec().deleteDoormanAccount(a)})),r.Bc(4,"delete"),r.Rb(),r.Rb()}if(2&t){const t=n.$implicit;r.Ab(2),r.Cc(t.email)}}function x(t,n){if(1&t){const t=r.Tb();r.Sb(0,"button",6),r.ac("click",(function(){return r.tc(t),r.ec().addDoorman()})),r.Bc(1,"Agregar Cuenta de Porter\xeda"),r.Rb()}}const I=[{path:"",component:(()=>{class t{constructor(t,n,a,o,e,i,c){this.dialog=t,this._snackBar=n,this.setData=a,this.holdData=o,this.fetchData=e,this.deleteData=i,this.authData=c,this.destroy$=new R.a,this.doormanList=[],this.showAddDoormanButton=!0,this.horizontalPosition="center",this.verticalPosition="bottom"}ngOnInit(){this.getDoormanInfo(),this.user=this.holdData.userInfo,this.buildingInfo=this.holdData.buildingInfo,this.paymentLink=this.holdData.buildingInfo.paymentLink,this.buildingPassword=this.holdData.buildingInfo.buildingPassword}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}getDoormanInfo(){this.fetchData.getBuidlingEmployees(this.holdData.buildingInfo.buildingId).pipe(Object(M.a)(this.destroy$)).subscribe(t=>{t.map(t=>{const n=t.payload.doc.data();this.doormanList.push(n)}),this.doormanList.length>0&&(this.showAddDoormanButton=!1)})}changeProfilePic(){console.log("hice click")}deleteDoormanAccount(t){this.deleteData.disableDoormanAccountFromDB(this.holdData.buildingInfo.buildingId,t.doormanId),this.doormanList.pop(),this.showAddDoormanButton=!0}copyMessage(){const t=document.createElement("textarea");t.style.position="fixed",t.style.left="0",t.style.top="0",t.style.opacity="0",t.value=this.buildingPassword,document.body.appendChild(t),t.focus(),t.select(),document.execCommand("copy"),document.body.removeChild(t)}addDoorman(){let t={action:"doorman"};this.dialog.open(p,{data:t}).afterClosed().subscribe(n=>{if(n.event===t.action){const t=n.data;this.authData.checkIfDoormanEmailExists(t.email).then(n=>{n.length>0?this._snackBar.open("El correo que registraste ya existe","Cerrar",{duration:2e3,horizontalPosition:this.horizontalPosition,verticalPosition:this.verticalPosition}):(this.createDoormanAccount(t),this._snackBar.open("Correo registrado exitosamente","Cerrar",{duration:2e3,horizontalPosition:this.horizontalPosition,verticalPosition:this.verticalPosition}))}).catch(t=>{"auth/invalid-email"===t.code&&this._snackBar.open("El correo que pusiste parece no existir, volver a registrar","Cerrar",{duration:2e3,horizontalPosition:this.horizontalPosition,verticalPosition:this.verticalPosition})})}})}goToPaymentLink(){this.dialog.open(p,{data:{action:"paymentLink",paymentLink:this.paymentLink}})}createDoormanAccount(t){this.setData.doormanCreationTrigger(this.holdData.buildingInfo.buildingId,{email:t.email,password:t.password,name:"Porter\xeda "+this.holdData.buildingInfo.name})}}return t.\u0275fac=function(n){return new(n||t)(r.Mb(c.b),r.Mb(s.a),r.Mb(g.a),r.Mb(f.a),r.Mb(y.a),r.Mb(P.a),r.Mb(C.a))},t.\u0275cmp=r.Gb({type:t,selectors:[["app-profilepage"]],decls:32,vars:8,consts:[["id","container"],[1,"card-admin"],[1,"card-building"],["mat-card-image","","alt","Building Picture",3,"src"],[1,"password-input"],["matInput","","readonly","",3,"ngModel","ngModelChange"],["mat-stroked-button","","color","primary",3,"click"],[1,"headers-align"],["role","list","class","staff-row",4,"ngFor","ngForOf"],["mat-stroked-button","","color","primary",3,"click",4,"ngIf"],["mat-button","",3,"click"],["role","list",1,"staff-row"],["role","listitem"],["color","warn",3,"click"]],template:function(t,n){1&t&&(r.Sb(0,"div",0),r.Sb(1,"mat-card",1),r.Sb(2,"mat-card-header"),r.Sb(3,"mat-card-title"),r.Bc(4),r.Rb(),r.Sb(5,"mat-card-subtitle"),r.Bc(6),r.Rb(),r.Rb(),r.Rb(),r.Sb(7,"mat-card",2),r.Sb(8,"mat-card-header"),r.Sb(9,"mat-card-title"),r.Bc(10),r.Rb(),r.Sb(11,"mat-card-subtitle"),r.Bc(12),r.Rb(),r.Rb(),r.Nb(13,"img",3),r.Sb(14,"mat-card-content"),r.Sb(15,"section",4),r.Sb(16,"mat-form-field"),r.Sb(17,"mat-label"),r.Bc(18,"CONTRASE\xd1A PARA REGISTRO DE RESIDENTES DEL EDIFCIO"),r.Rb(),r.Sb(19,"input",5),r.ac("ngModelChange",(function(t){return n.buildingPassword=t})),r.Rb(),r.Rb(),r.Sb(20,"button",6),r.ac("click",(function(){return n.copyMessage()})),r.Bc(21,"Copiar"),r.Rb(),r.Rb(),r.Sb(22,"mat-accordion",7),r.Sb(23,"mat-expansion-panel"),r.Sb(24,"mat-expansion-panel-header"),r.Sb(25,"mat-panel-title"),r.Bc(26," Cuenta de Porter\xeda "),r.Rb(),r.Rb(),r.zc(27,D,5,1,"mat-list",8),r.zc(28,x,2,0,"button",9),r.Rb(),r.Rb(),r.Rb(),r.Sb(29,"mat-card-actions"),r.Sb(30,"button",10),r.ac("click",(function(){return n.goToPaymentLink()})),r.Bc(31,"Mi Suscripci\xf3n"),r.Rb(),r.Rb(),r.Rb(),r.Rb()),2&t&&(r.Ab(4),r.Dc("\xa1Hola, ",n.user.name,"!"),r.Ab(2),r.Cc(n.user.email),r.Ab(4),r.Cc(n.buildingInfo.name),r.Ab(2),r.Cc(n.buildingInfo.address),r.Ab(1),r.mc("src",n.buildingInfo.photoLink,r.uc),r.Ab(6),r.lc("ngModel",n.buildingPassword),r.Ab(8),r.lc("ngForOf",n.doormanList),r.Ab(1),r.lc("ngIf",n.showAddDoormanButton))},directives:[S.a,S.d,S.h,S.g,S.e,S.c,l.a,l.e,d.b,m.b,m.j,m.m,b.b,k.a,k.c,k.d,k.e,o.l,o.m,S.b,w.a,w.b,_.a],styles:[".card-building[_ngcontent-%COMP%]{max-width:50%}.card-admin[_ngcontent-%COMP%]{max-width:30%;height:40%;display:flex;flex-direction:column;align-items:center}.card-admin[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{margin-bottom:20px}#container[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-around}.profile-img[_ngcontent-%COMP%]{max-width:50%;border-radius:50%;margin-bottom:5px}.content-admin[_ngcontent-%COMP%]{justify-content:center}.headers-align[_ngcontent-%COMP%]   .mat-expansion-panel-header-title[_ngcontent-%COMP%]{flex-basis:0}.headers-align[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%] + .mat-form-field[_ngcontent-%COMP%]{margin-left:8px}.password-input[_ngcontent-%COMP%], .staff-row[_ngcontent-%COMP%]{display:flex;flex-direction:row}.password-input[_ngcontent-%COMP%]{margin-bottom:20px}.password-input[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{margin-right:10px}.password-input[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{max-height:50px}"]}),t})()}];let A=(()=>{class t{}return t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({factory:function(n){return new(n||t)},imports:[[i.i.forChild(I)],i.i]}),t})();var v=a("onrN");let O=(()=>{class t{}return t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({factory:function(n){return new(n||t)},imports:[[o.c,v.a,e.a,A,m.f]]}),t})()}}]);