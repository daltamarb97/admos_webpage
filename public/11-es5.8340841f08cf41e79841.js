function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{KlkT:function(e,t,n){"use strict";n.r(t),n.d(t,"DirectoryModule",(function(){return _}));var a=n("ofXK"),i=n("tyNb"),c=n("5m3b"),o=n("pA66"),r=n("A09s"),b=n("LcAk"),s=n("fXoL"),l=n("IRfi"),u=n("2+6u"),d=n("Xlwt"),h=n("A2Vd"),f=n("3Pt+"),m=n("j14s");function p(e,t){if(1&e){var n=s.Tb();s.Sb(0,"div"),s.Sb(1,"mat-form-field",1),s.Sb(2,"mat-label"),s.Bc(3,"Nombre"),s.Rb(),s.Sb(4,"input",10),s.ac("ngModelChange",(function(e){return s.tc(n),s.ec().nameEmerg=e})),s.Rb(),s.Rb(),s.Nb(5,"br"),s.Sb(6,"mat-form-field",1),s.Sb(7,"mat-label"),s.Bc(8,"Telefono"),s.Rb(),s.Sb(9,"input",11),s.ac("ngModelChange",(function(e){return s.tc(n),s.ec().phoneEmerg=e})),s.Rb(),s.Rb(),s.Rb()}if(2&e){var a=s.ec();s.Ab(4),s.lc("ngModel",a.nameEmerg),s.Ab(5),s.lc("ngModel",a.phoneEmerg)}}function g(e,t){if(1&e){var n=s.Tb();s.Sb(0,"div"),s.Sb(1,"mat-form-field",1),s.Sb(2,"mat-label"),s.Bc(3,"Nombre"),s.Rb(),s.Sb(4,"input",10),s.ac("ngModelChange",(function(e){return s.tc(n),s.ec().nameOther=e})),s.Rb(),s.Rb(),s.Nb(5,"br"),s.Sb(6,"mat-form-field",1),s.Sb(7,"mat-label"),s.Bc(8,"Descripci\xf3n"),s.Rb(),s.Sb(9,"input",10),s.ac("ngModelChange",(function(e){return s.tc(n),s.ec().description=e})),s.Rb(),s.Rb(),s.Nb(10,"br"),s.Sb(11,"mat-form-field",1),s.Sb(12,"mat-label"),s.Bc(13,"Telefono"),s.Rb(),s.Sb(14,"input",11),s.ac("ngModelChange",(function(e){return s.tc(n),s.ec().phoneOther=e})),s.Rb(),s.Rb(),s.Rb()}if(2&e){var a=s.ec();s.Ab(4),s.lc("ngModel",a.nameOther),s.Ab(5),s.lc("ngModel",a.description),s.Ab(5),s.lc("ngModel",a.phoneOther)}}function v(e,t){1&e&&(s.Sb(0,"p",12),s.Bc(1,"Te falta informaci\xf3n"),s.Rb())}function R(e,t){if(1&e){var n=s.Tb();s.Sb(0,"button",13),s.ac("click",(function(){return s.tc(n),s.ec().addEmergencyContact()})),s.Bc(1,"Confirmar"),s.Rb()}}function S(e,t){if(1&e){var n=s.Tb();s.Sb(0,"button",13),s.ac("click",(function(){return s.tc(n),s.ec().addOtherContact()})),s.Bc(1,"Confirmar"),s.Rb()}}var y,C=((y=function(){function e(t,n){_classCallCheck(this,e),this.dialogRef=t,this.data=n,this.showError=!1}return _createClass(e,[{key:"onNoClick",value:function(){this.dialogRef.close({event:"close"})}},{key:"addEmergencyContact",value:function(){this.nameEmerg&&this.phoneEmerg?this.dialogRef.close({event:this.typeOfContact,data:{nameEmerg:this.nameEmerg,phoneEmerg:this.phoneEmerg}}):this.showError=!0}},{key:"addOtherContact",value:function(){this.nameOther&&this.phoneOther&&this.description?this.dialogRef.close({event:this.typeOfContact,data:{nameOther:this.nameOther,phoneOther:this.phoneOther,description:this.description}}):this.showError=!0}},{key:"changeType",value:function(e){"emergency"===e.value?(this.nameOther=null,this.phoneOther=null,this.description=null,this.showError=!1):"others"===e.value&&(this.nameEmerg=null,this.phoneEmerg=null,this.showError=!1)}}]),e}()).\u0275fac=function(e){return new(e||y)(s.Mb(b.f),s.Mb(b.a))},y.\u0275cmp=s.Gb({type:y,selectors:[["app-contact-dialog"]],decls:19,vars:6,consts:[["mat-dialog-content",""],["appearance","fill"],[3,"ngModel","ngModelChange","selectionChange"],["value","emergency"],["value","others"],[4,"ngIf"],["style","color: red;",4,"ngIf"],["mat-dialog-actions",""],["mat-button","",3,"click"],["mat-button","","mat-flat-button","","color","accent",3,"click",4,"ngIf"],["matInput","","type","text",3,"ngModel","ngModelChange"],["matInput","","type","number",3,"ngModel","ngModelChange"],[2,"color","red"],["mat-button","","mat-flat-button","","color","accent",3,"click"]],template:function(e,t){1&e&&(s.Sb(0,"div",0),s.Sb(1,"mat-form-field",1),s.Sb(2,"mat-label"),s.Bc(3,"Tipo de Contacto"),s.Rb(),s.Sb(4,"mat-select",2),s.ac("ngModelChange",(function(e){return t.typeOfContact=e}))("selectionChange",(function(e){return t.changeType(e)})),s.Sb(5,"mat-option",3),s.Bc(6,"Contacto de emergencia"),s.Rb(),s.Sb(7,"mat-option",4),s.Bc(8,"Otro"),s.Rb(),s.Rb(),s.Rb(),s.zc(9,p,10,2,"div",5),s.zc(10,g,15,3,"div",5),s.Nb(11,"br"),s.zc(12,v,2,0,"p",6),s.Sb(13,"footer"),s.Sb(14,"div",7),s.Sb(15,"button",8),s.ac("click",(function(){return t.onNoClick()})),s.Bc(16,"Cerrar"),s.Rb(),s.zc(17,R,2,0,"button",9),s.zc(18,S,2,0,"button",9),s.Rb(),s.Rb(),s.Rb()),2&e&&(s.Ab(4),s.lc("ngModel",t.typeOfContact),s.Ab(5),s.lc("ngIf","emergency"===t.typeOfContact),s.Ab(1),s.lc("ngIf","others"===t.typeOfContact),s.Ab(2),s.lc("ngIf",t.showError),s.Ab(5),s.lc("ngIf","emergency"===t.typeOfContact),s.Ab(1),s.lc("ngIf","others"===t.typeOfContact))},directives:[b.d,l.a,l.e,u.a,f.j,f.m,m.o,a.m,b.c,d.b,h.b,f.b,f.n],encapsulation:2}),y),O=n("MSSf"),I=n("TY1r");function k(e,t){if(1&e&&(s.Sb(0,"a"),s.Sb(1,"div",6),s.Nb(2,"img",7),s.Nb(3,"span",12),s.Rb(),s.Sb(4,"div",9),s.Sb(5,"h5"),s.Bc(6),s.Rb(),s.Sb(7,"span",10),s.Bc(8),s.Rb(),s.Rb(),s.Rb()),2&e){var n=t.$implicit;s.Ab(6),s.Cc(n.name),s.Ab(2),s.Dc(" Tel\xe9fono: ",n.phone,"")}}function A(e,t){if(1&e){var n=s.Tb();s.Sb(0,"a"),s.Sb(1,"div",6),s.Nb(2,"img",7),s.Nb(3,"span",12),s.Rb(),s.Sb(4,"div",9),s.Sb(5,"h5"),s.Bc(6),s.Sb(7,"span",10),s.Bc(8),s.Rb(),s.Rb(),s.Sb(9,"span",10),s.Bc(10),s.Rb(),s.Rb(),s.Sb(11,"div",13),s.Sb(12,"button",14),s.ac("click",(function(){s.tc(n);var e=t.$implicit;return s.ec().chat(e)})),s.Sb(13,"mat-icon"),s.Bc(14,"chat"),s.Rb(),s.Rb(),s.Rb(),s.Rb()}if(2&e){var a=t.$implicit;s.Ab(6),s.Ec("",a.name," ",a.lastname," "),s.Ab(2),s.Cc(a.email),s.Ab(2),s.Dc(" Tel\xe9fono: ",a.phone,"")}}function B(e,t){if(1&e&&(s.Sb(0,"a"),s.Sb(1,"div",6),s.Nb(2,"img",7),s.Nb(3,"span",12),s.Rb(),s.Sb(4,"div",9),s.Sb(5,"h5"),s.Bc(6),s.Sb(7,"span",10),s.Bc(8),s.Rb(),s.Rb(),s.Sb(9,"span",10),s.Bc(10),s.Rb(),s.Rb(),s.Rb()),2&e){var n=t.$implicit;s.Ab(6),s.Cc(n.name),s.Ab(2),s.Cc(n.description),s.Ab(2),s.Dc(" Tel\xe9fono: ",n.phone,"")}}var E,M,D,w=[{path:"",component:(E=function(){function e(t,n,a,i,c){_classCallCheck(this,e),this.fecthDataService=t,this.setData=n,this.holdData=a,this.dialog=i,this.router=c,this.residents=[],this.emergency=[],this.others=[]}return _createClass(e,[{key:"ngOnInit",value:function(){this.user=this.holdData.userInfo,this.buildingInfo=this.holdData.buildingInfo,this.getInfoDirectoryEmergency(),this.getInfoDirectoryOthers(),this.getInfoDirectoryResidents()}},{key:"getInfoDirectoryResidents",value:function(){var e=this;this.fecthDataService.getDirectory(this.user.buildingId,"residents").subscribe((function(t){t.map((function(t){var n=t.payload.doc.data();e.residents.push(n)}))}))}},{key:"getInfoDirectoryEmergency",value:function(){var e=this;this.fecthDataService.getDirectory(this.user.buildingId,"emergency").subscribe((function(t){t.map((function(t){var n=t.payload.doc.data();e.emergency.push(n)}))}))}},{key:"getInfoDirectoryOthers",value:function(){var e=this;this.fecthDataService.getDirectory(this.user.buildingId,"others").subscribe((function(t){t.map((function(t){var n=t.payload.doc.data();e.others.push(n)}))}))}},{key:"chat",value:function(e){var t=this;this.fecthDataService.getPrivateChatKey(this.user.userId,e.userId).subscribe((function(n){n.data()?t.router.navigate(["/canales-comunicacion"]):t.setData.createPrivateChat({userId:t.user.userId,name:t.user.name,lastname:t.user.lastname},{userId:e.userId,name:e.name,lastname:e.lastname}).then((function(){t.router.navigate(["/canales-comunicacion"])}))}))}},{key:"addContact",value:function(){var e=this;this.dialog.open(C).afterClosed().subscribe((function(t){"close"===t.event||("emergency"===t.event?e.addContactFirebase({type:t.event,info:{name:t.data.nameEmerg,phone:t.data.phoneEmerg},buildingId:e.user.buildingId}):"others"===t.event&&e.addContactFirebase({type:t.event,info:{name:t.data.nameOther,phone:t.data.phoneOther,description:t.data.description},buildingId:e.user.buildingId}))}))}},{key:"addContactFirebase",value:function(e){this.setData.addContact(e).then((function(){console.log("guardado")}))}}]),e}(),E.\u0275fac=function(e){return new(e||E)(s.Mb(c.a),s.Mb(r.a),s.Mb(o.a),s.Mb(b.b),s.Mb(i.f))},E.\u0275cmp=s.Gb({type:E,selectors:[["app-directory"]],decls:33,vars:7,consts:[[1,"p-20","bg-info","position-relative"],[1,"card-title","text-white","m-0"],[1,"card-subtitle","text-white","m-0","op-5"],["mat-raised-button","","color","warn",3,"click"],[1,"message-box","contact-box","p-20"],[1,"message-widget","contact-widget"],[1,"user-img"],["src","../assets/images/users/profile.png","alt","user",1,"img-circle"],[1,"profile-status","online","pull-right"],[1,"mail-contnet"],[1,"mail-desc"],[4,"ngFor","ngForOf"],[1,"profile-status","busy","pull-right"],[1,"example-button-container"],["mat-mini-fab","","aria-label","Example icon button with a home icon",3,"click"]],template:function(e,t){1&e&&(s.Sb(0,"mat-card"),s.Sb(1,"div",0),s.Sb(2,"div"),s.Sb(3,"h4",1),s.Bc(4,"Directorio"),s.Rb(),s.Sb(5,"h6",2),s.Bc(6),s.Rb(),s.Rb(),s.Sb(7,"button",3),s.ac("click",(function(){return t.addContact()})),s.Bc(8,"A\xf1adir contacto"),s.Rb(),s.Rb(),s.Sb(9,"div",4),s.Sb(10,"div",5),s.Bc(11," Administrador "),s.Sb(12,"a"),s.Sb(13,"div",6),s.Nb(14,"img",7),s.Nb(15,"span",8),s.Rb(),s.Sb(16,"div",9),s.Sb(17,"h5"),s.Bc(18),s.Rb(),s.Sb(19,"span",10),s.Bc(20),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Sb(21,"div",4),s.Sb(22,"div",5),s.Bc(23," Emergencias "),s.zc(24,k,9,2,"a",11),s.Rb(),s.Rb(),s.Sb(25,"div",4),s.Sb(26,"div",5),s.Bc(27," Residentes "),s.zc(28,A,15,4,"a",11),s.Rb(),s.Rb(),s.Sb(29,"div",4),s.Sb(30,"div",5),s.Bc(31," Otros Contactos "),s.zc(32,B,11,3,"a",11),s.Rb(),s.Rb(),s.Rb()),2&e&&(s.Ab(6),s.Dc("Estos son los contactos de los propietarios de ",t.buildingInfo.name,""),s.Ab(12),s.Ec("",t.user.name," ",t.user.lastname,""),s.Ab(2),s.Dc("Tel\xe9fono: ",t.user.phone," "),s.Ab(4),s.lc("ngForOf",t.emergency),s.Ab(4),s.lc("ngForOf",t.residents),s.Ab(4),s.lc("ngForOf",t.others))},directives:[O.a,d.b,a.l,I.a],styles:[".position-relative[_ngcontent-%COMP%]{display:flex;position:relative;justify-content:space-between}.add-contact[_ngcontent-%COMP%]{position:absolute;right:17px;top:57px}.mail-desc[_ngcontent-%COMP%]{margin-left:5px}"]}),E)}],N=((M=function e(){_classCallCheck(this,e)}).\u0275mod=s.Kb({type:M}),M.\u0275inj=s.Jb({factory:function(e){return new(e||M)},imports:[[i.i.forChild(w)],i.i]}),M),T=n("onrN"),_=((D=function e(){_classCallCheck(this,e)}).\u0275mod=s.Kb({type:D}),D.\u0275inj=s.Jb({factory:function(e){return new(e||D)},imports:[[a.c,N,T.a]]}),D)}}]);