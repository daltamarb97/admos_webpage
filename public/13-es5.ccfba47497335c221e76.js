function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,n){for(var a=0;a<n.length;a++){var e=n[a];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}function _createClass(t,n,a){return n&&_defineProperties(t.prototype,n),a&&_defineProperties(t,a),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{cRhG:function(t,n,a){"use strict";a.r(n),a.d(n,"ProfileModule",(function(){return z}));var e=a("ofXK"),o=a("YUcS"),i=a("tyNb"),c=a("LcAk"),r=a("fXoL"),l=a("0DX0"),s=a("IRfi"),d=a("A2Vd"),u=a("Xlwt"),b=a("3Pt+");function m(t,n){if(1&t){var a=r.Tb();r.Sb(0,"div",2),r.Sb(1,"mat-form-field"),r.Sb(2,"input",3),r.ac("ngModelChange",(function(t){return r.tc(a),r.ec().local_data.email=t})),r.Rb(),r.Rb(),r.Sb(3,"mat-form-field"),r.Sb(4,"input",4),r.ac("ngModelChange",(function(t){return r.tc(a),r.ec().local_data.password=t})),r.Rb(),r.Rb(),r.Sb(5,"div",5),r.Sb(6,"button",6),r.ac("click",(function(){return r.tc(a),r.ec().onNoClick()})),r.Bc(7,"Cancelar"),r.Rb(),r.Sb(8,"button",7),r.ac("click",(function(){return r.tc(a),r.ec().createDoormanAccount()})),r.Bc(9,"Crear Cuenta de Porter\xeda"),r.Rb(),r.Rb(),r.Rb()}if(2&t){var e=r.ec();r.Ab(2),r.lc("ngModel",e.local_data.email),r.Ab(2),r.lc("ngModel",e.local_data.password)}}function f(t,n){if(1&t){var a=r.Tb();r.Bc(0," Copia y pega este link en tu navegador de internet para pagar la mensualidad de Admos. Cada mes se actualiza el link. "),r.Sb(1,"section",8),r.Sb(2,"mat-form-field"),r.Sb(3,"mat-label"),r.Bc(4,"Link de Pago"),r.Rb(),r.Sb(5,"input",9),r.ac("ngModelChange",(function(t){return r.tc(a),r.ec().local_data.paymentLink=t})),r.Rb(),r.Rb(),r.Sb(6,"button",10),r.ac("click",(function(){return r.tc(a),r.ec().copyMessage()})),r.Bc(7,"Copiar"),r.Rb(),r.Rb(),r.Sb(8,"div",5),r.Sb(9,"button",6),r.ac("click",(function(){return r.tc(a),r.ec().onNoClick()})),r.Bc(10,"Salir"),r.Rb(),r.Rb()}if(2&t){var e=r.ec();r.Ab(5),r.lc("ngModel",e.local_data.paymentLink)}}var p,h=((p=function(){function t(n,a,e){_classCallCheck(this,t),this.dialogRef=n,this.data=a,this._snackBar=e,this.horizontalPosition="center",this.verticalPosition="bottom",this.local_data=Object.assign({},a),this.action=this.local_data.action}return _createClass(t,[{key:"onNoClick",value:function(){this.action="cancel",this.dialogRef.close({event:this.action})}},{key:"createDoormanAccount",value:function(){this.local_data.email&&this.local_data.password?this.dialogRef.close({data:this.local_data,event:this.action}):this._snackBar.open("Te falta informaci\xf3n para crear la cuenta","Cerrar",{duration:1500,horizontalPosition:this.horizontalPosition,verticalPosition:this.verticalPosition})}},{key:"copyMessage",value:function(){var t=document.createElement("textarea");t.style.position="fixed",t.style.left="0",t.style.top="0",t.style.opacity="0",t.value=this.local_data.paymentLink,document.body.appendChild(t),t.focus(),t.select(),document.execCommand("copy"),document.body.removeChild(t)}}]),t}()).\u0275fac=function(t){return new(t||p)(r.Mb(c.f),r.Mb(c.a),r.Mb(l.a))},p.\u0275cmp=r.Gb({type:p,selectors:[["app-profile-dialog"]],decls:3,vars:2,consts:[["mat-dialog-content","",4,"ngIf","ngIfElse"],["elseTemplate",""],["mat-dialog-content",""],["type","email","placeholder","email para la cuenta porter\xeda","matInput","",3,"ngModel","ngModelChange"],["type","text","placeholder","contrase\xf1a para la cuenta de porter\xeda","matInput","",3,"ngModel","ngModelChange"],["mat-dialog-actions",""],["mat-button","",3,"click"],["mat-button","","mat-flat-button","","color","warn",3,"click"],[1,"payment-input"],["matInput","","readonly","",3,"ngModel","ngModelChange"],["mat-stroked-button","","color","primary",3,"click"]],template:function(t,n){if(1&t&&(r.zc(0,m,10,2,"div",0),r.zc(1,f,11,1,"ng-template",null,1,r.Ac)),2&t){var a=r.rc(2);r.lc("ngIf","doorman"==n.action)("ngIfElse",a)}},directives:[e.m,c.d,s.a,d.b,b.b,b.j,b.m,c.c,u.b,s.e],styles:[".payment-input[_ngcontent-%COMP%]{display:flex;flex-direction:row;margin-bottom:20px;margin-top:15px}.payment-input[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{margin-right:10px}.payment-input[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{max-height:50px}"]}),p),g=a("A09s"),y=a("pA66"),C=a("5m3b"),P=a("7dP1"),k=a("niqc"),v=a("1G5W"),M=a("XNiG"),_=a("MSSf"),R=a("dCan"),S=a("kEI4"),w=a("TY1r");function D(t,n){if(1&t){var a=r.Tb();r.Sb(0,"mat-list",11),r.Sb(1,"mat-list-item",12),r.Bc(2),r.Rb(),r.Sb(3,"mat-icon",13),r.ac("click",(function(){r.tc(a);var t=n.$implicit;return r.ec().deleteDoormanAccount(t)})),r.Bc(4,"delete"),r.Rb(),r.Rb()}if(2&t){var e=n.$implicit;r.Ab(2),r.Cc(e.email)}}function x(t,n){if(1&t){var a=r.Tb();r.Sb(0,"button",6),r.ac("click",(function(){return r.tc(a),r.ec().addDoorman()})),r.Bc(1,"Agregar Cuenta de Porter\xeda"),r.Rb()}}var I,A,O,B=[{path:"",component:(I=function(){function t(n,a,e,o,i,c,r){_classCallCheck(this,t),this.dialog=n,this._snackBar=a,this.setData=e,this.holdData=o,this.fetchData=i,this.deleteData=c,this.authData=r,this.destroy$=new M.a,this.doormanList=[],this.showAddDoormanButton=!0,this.horizontalPosition="center",this.verticalPosition="bottom"}return _createClass(t,[{key:"ngOnInit",value:function(){this.getDoormanInfo(),this.user=this.holdData.userInfo,this.buildingInfo=this.holdData.buildingInfo,this.paymentLink=this.holdData.buildingInfo.paymentLink,this.buildingPassword=this.holdData.buildingInfo.buildingPassword}},{key:"ngOnDestroy",value:function(){this.destroy$.next(),this.destroy$.complete()}},{key:"getDoormanInfo",value:function(){var t=this;this.fetchData.getBuidlingEmployees(this.holdData.buildingInfo.buildingId).pipe(Object(v.a)(this.destroy$)).subscribe((function(n){n.map((function(n){var a=n.payload.doc.data();t.doormanList.push(a)})),t.doormanList.length>0&&(t.showAddDoormanButton=!1)}))}},{key:"changeProfilePic",value:function(){console.log("hice click")}},{key:"deleteDoormanAccount",value:function(t){this.deleteData.disableDoormanAccountFromDB(this.holdData.buildingInfo.buildingId,t.doormanId),this.doormanList.pop(),this.showAddDoormanButton=!0}},{key:"copyMessage",value:function(){var t=document.createElement("textarea");t.style.position="fixed",t.style.left="0",t.style.top="0",t.style.opacity="0",t.value=this.buildingPassword,document.body.appendChild(t),t.focus(),t.select(),document.execCommand("copy"),document.body.removeChild(t)}},{key:"addDoorman",value:function(){var t=this,n={action:"doorman"};this.dialog.open(h,{data:n}).afterClosed().subscribe((function(a){if(a.event===n.action){var e=a.data;t.authData.checkIfDoormanEmailExists(e.email).then((function(n){n.length>0?t._snackBar.open("El correo que registraste ya existe","Cerrar",{duration:2e3,horizontalPosition:t.horizontalPosition,verticalPosition:t.verticalPosition}):(t.createDoormanAccount(e),t._snackBar.open("Correo registrado exitosamente","Cerrar",{duration:2e3,horizontalPosition:t.horizontalPosition,verticalPosition:t.verticalPosition}))})).catch((function(n){"auth/invalid-email"===n.code&&t._snackBar.open("El correo que pusiste parece no existir, volver a registrar","Cerrar",{duration:2e3,horizontalPosition:t.horizontalPosition,verticalPosition:t.verticalPosition})}))}}))}},{key:"goToPaymentLink",value:function(){this.dialog.open(h,{data:{action:"paymentLink",paymentLink:this.paymentLink}})}},{key:"createDoormanAccount",value:function(t){this.setData.doormanCreationTrigger(this.holdData.buildingInfo.buildingId,{email:t.email,password:t.password,name:"Porter\xeda "+this.holdData.buildingInfo.name})}}]),t}(),I.\u0275fac=function(t){return new(t||I)(r.Mb(c.b),r.Mb(l.a),r.Mb(g.a),r.Mb(y.a),r.Mb(C.a),r.Mb(k.a),r.Mb(P.a))},I.\u0275cmp=r.Gb({type:I,selectors:[["app-profilepage"]],decls:32,vars:8,consts:[["id","container"],[1,"card-admin"],[1,"card-building"],["mat-card-image","","alt","Building Picture",3,"src"],[1,"password-input"],["matInput","","readonly","",3,"ngModel","ngModelChange"],["mat-stroked-button","","color","primary",3,"click"],[1,"headers-align"],["role","list","class","staff-row",4,"ngFor","ngForOf"],["mat-stroked-button","","color","primary",3,"click",4,"ngIf"],["mat-button","",3,"click"],["role","list",1,"staff-row"],["role","listitem"],["color","warn",3,"click"]],template:function(t,n){1&t&&(r.Sb(0,"div",0),r.Sb(1,"mat-card",1),r.Sb(2,"mat-card-header"),r.Sb(3,"mat-card-title"),r.Bc(4),r.Rb(),r.Sb(5,"mat-card-subtitle"),r.Bc(6),r.Rb(),r.Rb(),r.Rb(),r.Sb(7,"mat-card",2),r.Sb(8,"mat-card-header"),r.Sb(9,"mat-card-title"),r.Bc(10),r.Rb(),r.Sb(11,"mat-card-subtitle"),r.Bc(12),r.Rb(),r.Rb(),r.Nb(13,"img",3),r.Sb(14,"mat-card-content"),r.Sb(15,"section",4),r.Sb(16,"mat-form-field"),r.Sb(17,"mat-label"),r.Bc(18,"CONTRASE\xd1A PARA REGISTRO DE RESIDENTES DEL EDIFCIO"),r.Rb(),r.Sb(19,"input",5),r.ac("ngModelChange",(function(t){return n.buildingPassword=t})),r.Rb(),r.Rb(),r.Sb(20,"button",6),r.ac("click",(function(){return n.copyMessage()})),r.Bc(21,"Copiar"),r.Rb(),r.Rb(),r.Sb(22,"mat-accordion",7),r.Sb(23,"mat-expansion-panel"),r.Sb(24,"mat-expansion-panel-header"),r.Sb(25,"mat-panel-title"),r.Bc(26," Cuenta de Porter\xeda "),r.Rb(),r.Rb(),r.zc(27,D,5,1,"mat-list",8),r.zc(28,x,2,0,"button",9),r.Rb(),r.Rb(),r.Rb(),r.Sb(29,"mat-card-actions"),r.Sb(30,"button",10),r.ac("click",(function(){return n.goToPaymentLink()})),r.Bc(31,"Mi Suscripci\xf3n"),r.Rb(),r.Rb(),r.Rb(),r.Rb()),2&t&&(r.Ab(4),r.Dc("\xa1Hola, ",n.user.name,"!"),r.Ab(2),r.Cc(n.user.email),r.Ab(4),r.Cc(n.buildingInfo.name),r.Ab(2),r.Cc(n.buildingInfo.address),r.Ab(1),r.mc("src",n.buildingInfo.photoLink,r.uc),r.Ab(6),r.lc("ngModel",n.buildingPassword),r.Ab(8),r.lc("ngForOf",n.doormanList),r.Ab(1),r.lc("ngIf",n.showAddDoormanButton))},directives:[_.a,_.d,_.h,_.g,_.e,_.c,s.a,s.e,d.b,b.b,b.j,b.m,u.b,R.a,R.c,R.d,R.e,e.l,e.m,_.b,S.a,S.b,w.a],styles:[".card-building[_ngcontent-%COMP%]{max-width:50%}.card-admin[_ngcontent-%COMP%]{max-width:30%;height:40%;display:flex;flex-direction:column;align-items:center}.card-admin[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{margin-bottom:20px}#container[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-around}.profile-img[_ngcontent-%COMP%]{max-width:50%;border-radius:50%;margin-bottom:5px}.content-admin[_ngcontent-%COMP%]{justify-content:center}.headers-align[_ngcontent-%COMP%]   .mat-expansion-panel-header-title[_ngcontent-%COMP%]{flex-basis:0}.headers-align[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%] + .mat-form-field[_ngcontent-%COMP%]{margin-left:8px}.password-input[_ngcontent-%COMP%], .staff-row[_ngcontent-%COMP%]{display:flex;flex-direction:row}.password-input[_ngcontent-%COMP%]{margin-bottom:20px}.password-input[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{margin-right:10px}.password-input[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{max-height:50px}"]}),I)}],L=((A=function t(){_classCallCheck(this,t)}).\u0275mod=r.Kb({type:A}),A.\u0275inj=r.Jb({factory:function(t){return new(t||A)},imports:[[i.i.forChild(B)],i.i]}),A),E=a("onrN"),z=((O=function t(){_classCallCheck(this,t)}).\u0275mod=r.Kb({type:O}),O.\u0275inj=r.Jb({factory:function(t){return new(t||O)},imports:[[e.c,E.a,o.a,L,b.f]]}),O)}}]);