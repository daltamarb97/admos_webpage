<mat-sidenav-container class="chat-sidebar-container">
    <!-- left side menu -->
    <mat-sidenav opened mode="side">
        <mat-toolbar class=".mat-toolbar  mat-primary mat-toolbar-single-row" style="height: 8%; background-color: #2C3B4D !important;" > 
             <span class="toolbar-msg" >Chats Grupales</span> 
             <span style="margin-left: auto;" class="material-icons">group_add</span>
        </mat-toolbar>
        <mat-list >
            <mat-list-item *ngFor="let room of chatRooms" [class.highlighted]="currentRoomData.id === room.roomId" 
            (click)="getMessagesFromRoom(room)" > {{room.roomName}} </mat-list-item>

        </mat-list>
        <mat-toolbar  class=".mat-toolbar  mat-primary mat-toolbar-single-row" style="height: 8%; background-color: #2C3B4D !important;"> 
            <span class="toolbar-msg">Mensajes Directos</span>
            <span style="margin-left: auto;" class="material-icons">add</span>

       </mat-toolbar>
      
        <mat-list >
            <mat-list-item *ngFor="let chat of privateChats" (click)="getMessagesFromPrivateChat(chat)">
                 {{chat.name}} {{chat.lastname}}
           </mat-list-item>
      

        </mat-list>

        <div style="display: flex; justify-content: center;">
            <button mat-raised-button (click)="addChatRoom()" color="primary" >Crear Grupo</button>
        </div>
    </mat-sidenav>
    <!-- right side menu -->

    <mat-sidenav *ngIf="showDetail" opened mode="side" position="end">
        <h3><b>#{{currentRoomData.name}}</b></h3>
        <div>
            <mat-card>
                <mat-card-header>
                    <mat-card-title>Descripción</mat-card-title>
                    <mat-card-subtitle>{{currentRoomData.description}}</mat-card-subtitle>
                </mat-card-header>
            </mat-card>
        </div>
        <h5>Participantes de <b>#{{currentRoomData.name}}</b></h5>
        <div>
            <mat-card>
                <mat-card-content *ngFor="let participant of currentRoomParticipants">
                    <p>
                    {{participant.name}} {{participant.lastname}}({{participant.property}})
                    </p>
                </mat-card-content>
            </mat-card>
        </div>
        <div style="display: flex; justify-content: center;">
        <button mat-raised-button color="warn" (click)="deleteChatRoom()">Eliminar #{{currentRoomData.name}}</button>
        </div>

    </mat-sidenav> 
                         <!-- /*******************
                               ROOM CHATS
                          *******************/ -->
   <div *ngIf="showRoomChats"> 
    <mat-toolbar  class="background-room" style="height: 8%; background-color: #2C3B4D !important;">
        <span class="toolbar-msg"  ># {{currentRoomData.name}}</span>
        <span class="example-spacer"></span>
        <button  mat-raised-button color="primary" class="example-icon" (click)="showDetails()">Detalles</button>
        <button mat-icon-button class="example-icon"  aria-label="Example icon-button with share icon">
          <mat-icon>more_vert</mat-icon>
        </button>
      </mat-toolbar>
        <div class="chat"  *ngFor="let message of chatMessages" >
            <!-- <img class="user-img" [src]="msg.userAvatar" alt="" src=""> -->
            <!-- <ion-spinner name="dots" *ngIf="msg.status === 'pending'"></ion-spinner> -->
              <div class="me"  *ngIf="userId == message.userId">          
                  <span style="word-wrap: break-word;">{{message.msg}} </span>     
                  <p class="time-left">{{message.timestamp.toDate() | date: 'hh:mm'}}</p> 
              </div>
              <div class="otherMessage"   *ngIf="userId !== message.userId">
                <span class="name"  >
                    {{message.name}} {{message.lastname}}<p class="time-right" style="margin-left:10px;">{{message.timestamp.toDate() | date: 'hh:mm'}}</p> 
                </span> <br>
                <span style="word-wrap: break-word;">{{message.msg}}</span>      
              </div>
            </div>   
   </div>
   <div *ngIf="chatMessages.length === 0">
    <mat-card class="message-card">
        <mat-card-content>
            <p>
            Aún no hay mensajes en esta sala
            </p>
        </mat-card-content>
    </mat-card>
</div>
                <!-- /*******************
                END OF ROOM CHATS
                *******************/ -->


                <!-- /*******************
                PRIVATE CHAT
                *******************/ -->
   <div *ngIf="showPrivateChats"> 
    <mat-toolbar  class="background-room" style="height: 8%; background-color: #2C3B4D !important;">
        <span class="toolbar-msg"  >{{currentPrivateChat.name}}</span>
        <span class="example-spacer"></span>
        <!-- In the future option button can have some blocking feature in the button below -->
        <!-- <button mat-icon-button class="example-icon"  aria-label="Example icon-button with share icon">
          <mat-icon>more_vert</mat-icon>
        </button> -->
      </mat-toolbar>
        <div class="chat"  *ngFor="let message of privateChats" >
            <!-- <img class="user-img" [src]="msg.userAvatar" alt="" src=""> -->
            <!-- <ion-spinner name="dots" *ngIf="msg.status === 'pending'"></ion-spinner> -->
              <div class="me"  *ngIf="userId == message.userId">          
                  <span style="word-wrap: break-word;">{{message.msg}} </span>     
                  <p class="time-left">{{message.timestamp.toDate() | date: 'hh:mm'}}</p> 
              </div>
              <div class="otherMessage"   *ngIf="userId !== message.userId">
                <span class="name"  >
                    {{message.name}} {{message.lastname}}<p class="time-right" style="margin-left:10px;">{{message.timestamp.toDate() | date: 'hh:mm'}}</p> 
                </span> <br>
                <span style="word-wrap: break-word;">{{message.msg}}</span>      
              </div>
            </div>   
   </div>

   <div *ngIf="privateChats.length === 0">
    <mat-card class="message-card">
        <mat-card-content>
            <p>
            Aún no hay mensajes en esta sala
            </p>
        </mat-card-content>
    </mat-card>
</div>
            <!-- /*******************
            END OF PRIVATE CHAT
            *******************/ -->
   

  
    <!-- end of chat messages layout -->
    <footer>
        <mat-form-field style="background-color: white; border-top: gray;">
            <div style="display: flex;">
                <textarea matInput
                cdkTextareaAutosize
                #autosize="cdkTextareaAutosize"
                cdkAutosizeMinRows="1"
                cdkAutosizeMaxRows="9"
                [(ngModel)]="currentMessage" placeholder="Envía un mensaje"></textarea>
                
                <div class="example-button-container">
                  <button mat-mini-fab >
                      <mat-icon (click)="sendMessage()">send</mat-icon>
                  </button>
                </div>
            </div>
         
    
          </mat-form-field>
    </footer>
   
<!-- 
        <mat-card-content>
            <mat-form-field>
                <input matInput type="text" [(ngModel)]="currentMessage">
                <mat-icon (click)="sendMessage()">send</mat-icon>

            </mat-form-field>
        
          
        </mat-card-content> --> 
</mat-sidenav-container>