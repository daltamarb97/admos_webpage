
<div style=" display:flex;align-items: center;" class="m-t-20 m-b-20">    
<mat-card-title style="color:gray; margin-right: 20px;" >Tabla de Pagos</mat-card-title>
    <button mat-raised-button 
        color="primary" 
        class="b-title" 
        style="margin-left: auto;"
        (click)="fileInput.click()">
        Subir Excel 
    </button>
    <button mat-raised-button (click)="fileInput.click()" color="primary" class="b-title" [disabled]="true"  >Descargar Tabla  
       </button>
</div>
<div class="m-t-20 m-b-20">
    <button mat-raised-button color="primary" aria-label="Añadir Fila" (click) ='openDialog("Add",{})' 
    class="b-title">
        <span class="material-icons">
       add_box
       </span>Agregar Propiedad
   </button>
       <button mat-raised-button (click)="sendPaymentRemainderMessage()" color="primary" >
           <span class="material-icons">
               add_alert
               </span>Enviar Notificaciones de pago  
            </button>
</div>

<table  mat-table [dataSource]="dataSource" class="mat-elevation-z8">
    <ng-container matColumnDef="action">
        <th  mat-header-cell *matHeaderCellDef style="text-align: center">Acciones</th>
        <td mat-cell *matCellDef="let element" style="text-align: center">
            <mat-icon (click)='openDialog("Update",element)'>create</mat-icon>
            <mat-icon color="warn" (click)='openDialog("Delete",element)'>delete</mat-icon>
            <mat-icon style="color: green" (click)='openDialog("Payment",element)'>monetization_on</mat-icon>
        </td>  
    </ng-container>

    <ng-container matColumnDef="facility_number">
        <th mat-header-cell *matHeaderCellDef style="text-align: center">Propiedad</th>
        <td mat-cell *matCellDef="let element" style="text-align: center"
        (click)="showUserRowProfile(element)"> 
            {{element.facility_number}} 
        </td>
    </ng-container>

    <ng-container matColumnDef="email" class="container-align">
        <th mat-header-cell *matHeaderCellDef style="text-align: center">Email </th>
        <td mat-cell *matCellDef="let element" style="text-align: center"
        (click)="showUserRowProfile(element)"> 
            {{element.email}} 
        </td>    
    </ng-container>

    <ng-container matColumnDef="phone">
        <th mat-header-cell *matHeaderCellDef style="text-align: center">Telefono </th>
        <td mat-cell *matCellDef="let element" style="text-align: center"
        (click)="showUserRowProfile(element)"> 
            {{element.phone}}     
        </td>
    </ng-container>

    <ng-container matColumnDef="legal_id">
        <th mat-header-cell *matHeaderCellDef style="text-align: center">Cédula Residente</th>
        <td mat-cell *matCellDef="let element" style="text-align: center"
        (click)="showUserRowProfile(element)"> 
            {{element.legal_id}} 
        </td>
    </ng-container>

    <ng-container matColumnDef="pending_to_pay">
        <th mat-header-cell *matHeaderCellDef style="text-align: center">Valor pendiente por pagar</th>
        <td mat-cell *matCellDef="let element" style="text-align: center" 
        (click)="showUserRowProfile(element)"> 
            {{element.pending_to_pay | currency}} 
        </td>
    </ng-container>

    <ng-container matColumnDef="amount_to_pay">
        <th mat-header-cell *matHeaderCellDef style="text-align: center">Valor Renta</th>
        <td mat-cell *matCellDef="let element" style="text-align: center"
        (click)="showUserRowProfile(element)"> 
            {{element.amount_to_pay | currency}} 
        </td>
    </ng-container>



    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns;" 
        [ngStyle]="styleRow(row)">
    </tr>
    
</table>

<!-- <mat-paginator [length]="100"
              [pageSize]="10">
</mat-paginator> -->


<input hidden #fileInput type="file" class="form-control" (change)="addfile($event)" placeholder="Upload file" accept=".csv,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel">        
